# Geospatial Conditioning Service - Newman Postman Collection Test Configuration

## Introduction

The purpose of the integegration tests for Geospatial Conditioning Service is to check what the service returns against what is expected. The configuration file is loaded into the test file to check the API calls. Each test generates a report which shows the passing or failing of the tests. If the tests pass, the report returns positive. If the tests fail, the report states which test failed and why.

# Newman Jenkins API Testing

For more information on Newman CLI integration , checkout the [Newman Command Line Integration](https://www.getpostman.com/docs/v6/postman/collection_runs/command_line_integration_with_newman).

For more information on Newman Postman API testing , checkout the [Postman Sandbox API Reference](https://www.getpostman.com/docs/v6/postman/scripts/postman_sandbox_api_reference).

# Postman Collection JSON - Test File

At it's core, Newman executes a collection JSON that can either be generated by Postman's GUI or manually created JSON files that follow the same structure. In this collection, users can define global variables , pre-request scripts, and API calls to be executed in support of analyzing response JSON and other micro-service behavior.


# Configuration File JSON

Though the collection JSON can house all our tests and unique configurations, doing so would result in a massive file that is difficult to maintain. However, to add flexibility to your test environment Newman provides an option to specify a configuration JSON file as a flag during CLI execution. With this reference, users can specify hosts, desired request bodies, and define the expected response from the API call for any given request.

# Happy Path Test

Tests all positive API calls to the Geospatial Conditioning Service.

Health Check
 - Valid 200 Response
ICORDS D, G, U, N, S (and valid IGEOLO)
 - Valid 200 Response
 - Validate schema
 - Validate contents of GeoJSON and CountryCodes

 Positive Test Report
┌─────────────────────────┬──────────┬──────────┐
│                         │ executed │   failed │
├─────────────────────────┼──────────┼──────────┤
│              iterations │        1 │        0 │
├─────────────────────────┼──────────┼──────────┤
│                requests │        6 │        0 │
├─────────────────────────┼──────────┼──────────┤
│            test-scripts │        6 │        0 │
├─────────────────────────┼──────────┼──────────┤
│      prerequest-scripts │        6 │        0 │
├─────────────────────────┼──────────┼──────────┤
│              assertions │       12 │        0 │
├─────────────────────────┴──────────┴──────────┤
│ total run duration: 918ms                     │
├───────────────────────────────────────────────┤
│ total data received: 4.25KB (approx)          │
├───────────────────────────────────────────────┤
│ average response time: 114ms                  │
└───────────────────────────────────────────────┘

#Bad Path Test

Tests all expected errors with bad API calls to the Geospatial Conditioning Service.

Bad Path Tests:
Unknown endpoint
 - 404 Error
 - Expected messages, errors and warnings
Missing ICORDS Parameter
 - 400 Error
 - Expected messages, errors and warnings
Missing IGEOLO Parameter
 - 400 Error
 - Expected messages, errors and warnings
Empty JSON Body
 - 400 Error
 - Expected messages, errors and warnings
Invalid Path
 - 404 Error
 - Expected messages, errors and warnings
Bad JSON Syntax
 - 500 Error
 - Expected messages, errors and warnings

 Positive Test Report
┌─────────────────────────┬──────────┬──────────┐
│                         │ executed │   failed │
├─────────────────────────┼──────────┼──────────┤
│              iterations │        1 │        0 │
├─────────────────────────┼──────────┼──────────┤
│                requests │        8 │        0 │
├─────────────────────────┼──────────┼──────────┤
│            test-scripts │        8 │        0 │
├─────────────────────────┼──────────┼──────────┤
│      prerequest-scripts │        8 │        0 │
├─────────────────────────┼──────────┼──────────┤
│              assertions │       15 │        0 │
├─────────────────────────┴──────────┴──────────┤
│ total run duration: 705ms                     │
├───────────────────────────────────────────────┤
│ total data received: 1.94KB (approx)          │
├───────────────────────────────────────────────┤
│ average response time: 53ms                   │
└───────────────────────────────────────────────┘


# Execution Commands

Happy Path Tests:
newman run GCS_happy_path_test.json -d GCS_happy_path_config.json

Bad Path Tests:
newman run GCS_bad_path_test.json -d GCS_bad_path_config.json